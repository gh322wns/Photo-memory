# ğŸ’ ì›¨ë”© ë©”ëª¨ë¦¬ (Wedding Memory)

ì†Œì¤‘í•œ ì›¨ë”©ì˜ ëª¨ë“  ìˆœê°„ì„ QR ì½”ë“œ í•˜ë‚˜ë¡œ í•¨ê»˜ ê°„ì§í•˜ëŠ” í”Œë«í¼

## ğŸŒ ì ‘ì† URL

- **ê°œë°œ ì„œë²„**: `http://localhost:3000`
- **ë©”ì¸ í˜ì´ì§€**: `/`
- **ì‹ ë‘ì‹ ë¶€ ë¡œê·¸ì¸**: `/login`
- **ì‹ ë‘ì‹ ë¶€ íšŒì›ê°€ì…**: `/register`
- **ì›¨ë”© ì„¤ì •**: `/setup`
- **ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ**: `/dashboard`
- **ìŠˆí¼ì–´ë“œë¯¼**: `/super`
- **ê²ŒìŠ¤íŠ¸ ì›¨ë”© í˜ì´ì§€**: `/wedding/{wedding_id}`

---

## âœ… êµ¬í˜„ëœ ê¸°ëŠ¥

### ì‹ ë‘ì‹ ë¶€ (ì–´ë“œë¯¼) í”Œë¡œìš°
- [x] ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ íšŒì›ê°€ì… Â· ë¡œê·¸ì¸
- [x] ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
- [x] JWT ê¸°ë°˜ ì¸ì¦ (Web Crypto API, Cloudflare Workers í˜¸í™˜)
- [x] 3ê°€ì§€ í”Œëœ ì„ íƒ (3ì¼ / 7ì¼ / í‰ìƒë³´ê´€) - í˜„ì¬ ì „ì²´ ë¬´ë£Œ
- [x] ì›¨ë”© ì •ë³´ ë“±ë¡ (ì‹ ë¶€ëª…, ì‹ ë‘ëª…, ì›¨ë”©ì¼, ì¥ì†Œ, ì‹œê°„, ì—°ë½ì²˜)
- [x] ì»¤ë²„ ì´ë¯¸ì§€ ì—…ë¡œë“œ (JPG/PNG, ìµœëŒ€ 10MB)
- [x] QR ì½”ë“œ ìë™ ìƒì„± (qrcode.js ë¼ì´ë¸ŒëŸ¬ë¦¬)
- [x] QR ì½”ë“œ PNG ë‹¤ìš´ë¡œë“œ
- [x] ê³µìœ  ë§í¬ ë³µì‚¬
- [x] ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ (ì—…ë¡œë“œ í†µê³„, íŒŒì¼ ëª©ë¡, ì €ì¥ ìš©ëŸ‰)
- [x] ì—…ë¡œë“œ í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€
- [x] íŒŒì¼ ê°œë³„ ì‚­ì œ
- [x] í”Œëœ ì—…ê·¸ë ˆì´ë“œ

### ê²ŒìŠ¤íŠ¸ í”Œë¡œìš°
- [x] QR ìŠ¤ìº” â†’ ê²ŒìŠ¤íŠ¸ ëœë”© í˜ì´ì§€ (ì»¤ë²„ì´ë¯¸ì§€, ì»¤í”Œì´ë¦„, ë‚ ì§œ)
- [x] ì´ë¦„ ì…ë ¥ (í•„ìˆ˜, ìµœëŒ€ 20ì, íŠ¹ìˆ˜ë¬¸ì ì œì™¸)
- [x] ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ (JPG, PNG, HEIC, MP4, MOV)
- [x] ì—…ë¡œë“œ ì§„í–‰ìƒíƒœ í‘œì‹œ
- [x] ì—…ë¡œë“œ ì™„ë£Œ í™”ë©´ + ìƒ‰ì¢…ì´ ì• ë‹ˆë©”ì´ì…˜
- [x] ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì›
- [x] ì¤‘ë³µ íŒŒì¼ ë°©ì§€

### ìŠˆí¼ì–´ë“œë¯¼ ê¸°ëŠ¥
- [x] ì „ì²´ í†µê³„ (ì‚¬ìš©ì, ì›¨ë”©, ì—…ë¡œë“œ, ê²ŒìŠ¤íŠ¸ ìˆ˜, ì €ì¥ìš©ëŸ‰)
- [x] ì „ì²´ ì›¨ë”© ëª©ë¡ (ê²€ìƒ‰ í¬í•¨)
- [x] ì›¨ë”© ê°•ì œ í™œì„±í™”/ë¹„í™œì„±í™”
- [x] ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ

---

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­ | ê¸°ìˆ  |
|------|------|
| **Backend** | Hono v4 (TypeScript) |
| **Frontend** | Vanilla JS + Tailwind CSS (CDN) |
| **Runtime** | Cloudflare Workers / Pages |
| **Database** | Cloudflare D1 (SQLite) |
| **Storage** | Cloudflare R2 |
| **Auth** | JWT (jose library, Web Crypto API) |
| **QR Code** | qrcode.js (CDN) |
| **ë¹Œë“œ ë„êµ¬** | Vite + @hono/vite-build |

---

## ğŸ“Š ë°ì´í„° ëª¨ë¸

### í…Œì´ë¸” êµ¬ì¡°
- **users** - ì‹ ë‘ì‹ ë¶€ ê³„ì • (id, email, password_hash, name, role)
- **plans** - í”Œëœ (plan_a: 3ì¼, plan_b: 7ì¼, plan_c: í‰ìƒ)
- **weddings** - ì›¨ë”© ì •ë³´ (ì»¤í”Œëª…, ë‚ ì§œ, ì¥ì†Œ, í”Œëœ, ì»¤ë²„ì´ë¯¸ì§€)
- **uploads** - ì—…ë¡œë“œ íŒŒì¼ (ê²ŒìŠ¤íŠ¸ëª…, íŒŒì¼í‚¤, íƒ€ì…, í¬ê¸°)
- **guests** - ë°©ë¬¸ ê²ŒìŠ¤íŠ¸ ê¸°ë¡

### ìŠ¤í† ë¦¬ì§€ êµ¬ì¡° (R2)
```
weddings/{wedding_id}/{file_id}.{ext}   # ê²ŒìŠ¤íŠ¸ ì—…ë¡œë“œ íŒŒì¼
covers/{wedding_id}/cover.{ext}          # ì»¤ë²„ ì´ë¯¸ì§€
```

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/api/auth/register` | íšŒì›ê°€ì… |
| POST | `/api/auth/login` | ë¡œê·¸ì¸ |
| POST | `/api/auth/reset-password` | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • |

### ì›¨ë”© ê´€ë¦¬
| Method | Endpoint | ì„¤ëª… | ì¸ì¦ |
|--------|----------|------|------|
| POST | `/api/weddings` | ì›¨ë”© ìƒì„±/ìˆ˜ì • | âœ… |
| GET | `/api/weddings/my` | ë‚´ ì›¨ë”© ì¡°íšŒ | âœ… |
| PUT | `/api/weddings/plan` | í”Œëœ ë³€ê²½ | âœ… |
| PUT | `/api/weddings/toggle-upload` | ì—…ë¡œë“œ í† ê¸€ | âœ… |
| GET | `/api/weddings/:id/public` | ê³µê°œ ì›¨ë”© ì •ë³´ (ê²ŒìŠ¤íŠ¸ìš©) | âŒ |

### íŒŒì¼ ì—…ë¡œë“œ
| Method | Endpoint | ì„¤ëª… | ì¸ì¦ |
|--------|----------|------|------|
| POST | `/api/uploads/guest/:weddingId` | ê²ŒìŠ¤íŠ¸ íŒŒì¼ ì—…ë¡œë“œ | âŒ |
| POST | `/api/uploads/cover` | ì»¤ë²„ì´ë¯¸ì§€ ì—…ë¡œë“œ | âœ… |
| GET | `/api/uploads/my` | ë‚´ ì—…ë¡œë“œ ëª©ë¡ | âœ… |
| GET | `/api/uploads/download/:id` | íŒŒì¼ ë‹¤ìš´ë¡œë“œ | âœ… |
| DELETE | `/api/uploads/:id` | íŒŒì¼ ì‚­ì œ | âœ… |
| GET | `/api/uploads/cover-image/:weddingId` | ì»¤ë²„ì´ë¯¸ì§€ ì¡°íšŒ | âŒ |

### ìŠˆí¼ì–´ë“œë¯¼
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/api/super/stats` | ì „ì²´ í†µê³„ |
| GET | `/api/super/weddings` | ì›¨ë”© ëª©ë¡ |
| PUT | `/api/super/weddings/:id/disable` | ì›¨ë”© ë¹„í™œì„±í™” |
| PUT | `/api/super/weddings/:id/enable` | ì›¨ë”© í™œì„±í™” |
| GET | `/api/super/users` | ì‚¬ìš©ì ëª©ë¡ |

---

## ğŸ§‘â€ğŸ’¼ ê¸°ë³¸ ê³„ì •

### ìŠˆí¼ì–´ë“œë¯¼
- **ì´ë©”ì¼**: `admin@wedding-memory.com`
- **ë¹„ë°€ë²ˆí˜¸**: `Admin@1234!`
> âš ï¸ ì‹¤ì œ ë°°í¬ ì‹œ ë°˜ë“œì‹œ ë³€ê²½í•˜ì„¸ìš”!

---

## ğŸš€ ë¡œì»¬ ê°œë°œ í™˜ê²½ ì‹¤í–‰

```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 2. í”„ë¡œì íŠ¸ ë¹Œë“œ
npm run build

# 3. D1 ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ (ìµœì´ˆ 1íšŒ)
npx wrangler d1 execute DB --local --persist-to .wrangler/state --file=./migrations/0001_initial_schema.sql

# 4. ì„œë¹„ìŠ¤ ì‹œì‘ (PM2)
pm2 start ecosystem.config.cjs

# 5. ì„œë¹„ìŠ¤ í™•ì¸
curl http://localhost:3000
```

---

## â˜ï¸ Cloudflare ë°°í¬

```bash
# 1. Cloudflare ì¸ì¦
npx wrangler login

# 2. D1 ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
npx wrangler d1 create wedding-memory-production

# 3. R2 ë²„í‚· ìƒì„±
npx wrangler r2 bucket create wedding-memory-bucket

# 4. wrangler.jsoncì— database_id ì—…ë°ì´íŠ¸

# 5. í”„ë¡œë•ì…˜ ë§ˆì´ê·¸ë ˆì´ì…˜
npx wrangler d1 migrations apply wedding-memory-production

# 6. JWT ì‹œí¬ë¦¿ ì„¤ì •
npx wrangler pages secret put JWT_SECRET --project-name wedding-memory

# 7. ë°°í¬
npm run build && npx wrangler pages deploy dist --project-name wedding-memory
```

---

## ğŸ”® í–¥í›„ ê°œë°œ ì˜ˆì •

- [ ] SMS ì•Œë¦¼ (ì—…ë¡œë“œ ë°œìƒ ì‹œ ì‹ ë‘ì‹ ë¶€ì—ê²Œ)
- [ ] AI ìë™ ì•¨ë²” ìƒì„±
- [ ] ì–¼êµ´ ê·¸ë£¹í™” (AI)
- [ ] ì˜ìƒ í•˜ì´ë¼ì´íŠ¸ ìë™ ìƒì„±
- [ ] ìŠ¬ë¼ì´ë“œì‡¼ ìƒì„±
- [ ] ì†Œì…œ ë¡œê·¸ì¸ (Google, Kakao)
- [ ] ìœ ë£Œ í”Œëœ ê²°ì œ ì‹œìŠ¤í…œ
- [ ] ZIP ì¼ê´„ ë‹¤ìš´ë¡œë“œ
- [ ] ì „ì²´ íŒŒì¼ ê²€ìƒ‰

---

## ğŸ›¡ï¸ ë³´ì•ˆ ì‚¬í•­

- JWT í† í° ê¸°ë°˜ ì¸ì¦ (7ì¼ ë§Œë£Œ)
- Web Crypto APIë¥¼ í†µí•œ ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (SHA-256 + ì†”íŠ¸)
- R2 ì„œëª…ëœ URLì„ í†µí•œ íŒŒì¼ ì ‘ê·¼
- íŒŒì¼ ì—…ë¡œë“œ í¬ê¸° ì œí•œ (ê²ŒìŠ¤íŠ¸: 500MB, ì»¤ë²„: 10MB)
- íŒŒì¼ íƒ€ì… í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê²€ì¦
- í”Œëœ ë§Œë£Œ ì‹œ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ìë™ ë¹„í™œì„±í™”
